"use strict";var UI=function(){var c,a=document.getElementById("reviews-list");function u(e){return fetch("http://localhost:1337/reviews/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(){return console.log(e)})}return{addReview:function(e){e.preventDefault();var n=d.select(".review-name"),t=d.select(".review-rating"),r=d.select(".review-comment"),i=window.location.href,o={idRestaurant:c=Number.isNaN(+i.slice(-2))?i.slice(-1):i.slice(-2),name:n.value,rating:t.value,comment:r.value};return idb.open("reviewsDb",1,function(e){e.objectStoreNames.contains("reviews")||e.createObjectStore("reviews",{keyPath:"id",autoIncrement:!0})}).then(function(e){return e.transaction("reviews").objectStore("reviews").getAll()}).then(function(e){var n=[];return e.forEach(function(e){return n.push(e)}),n.push(o),n}).then(u),Promise.resolve(o)},updateReviewsDB:function(e,t){e.then(function(e){var n=e.transaction("reviews","readwrite");return n.objectStore("reviews").put(t),n.complete}).then(function(){return console.log("added")})},appendReview:function(e){a.innerHTML="",e.then(function(e){return e.transaction("reviews").objectStore("reviews").getAll()}).then(function(e){return e.filter(function(e){return e.idRestaurant===c})}).then(function(e){e.map(function(e){var n,t,r,i,o;a.appendChild((n=e.name,t=e.rating,r=e.comment,i=document.createElement("li"),o="<h4>From ".concat(n,"</h4>\n        <p>Rating: ").concat(t,"</p>\n        <p>").concat(r,"</p>"),i.innerHTML=o,i))})})}}}();